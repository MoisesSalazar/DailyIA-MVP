import{s as o}from"./store-DRSfkTDY.js";import{d as f,y as p,p as k,z as P,o as W,e as X,a as z,b as g,u as e,F as Y}from"./app-Cb7TLskx.js";import{T as q,_,a as $,b as N}from"./ModalDelete-CtfbLgsw.js";import"./Button-BGYz8Uub.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-BiNuMcY8.js";function Z(){const A=f(""),w=f(!1),b=f(!1),h=f(!1),u=p({route:route("api.incomes.store"),method:"post",data:[{name:"wallet_id",value:o.wallet.id}],isLoading:!1,formData:{name:"",wallet_id:o.wallet.id,budget:0},fields:[{name:"name",label:"Nombre",field:"name",rules:["required","string"]},{name:"budget",label:"Presupuesto",field:"budget",rules:["required","numeric"]}]}),m=p({route:"",method:"put",data:[{name:"wallet_id",value:o.wallet.id}],isLoading:!1,formData:{id:"",name:"",budget:0,month:"",year:""},fields:[{name:"name",label:"Nombre",field:"name",rules:["required","string"],visible:!0},{name:"budget",label:"Presupuesto",field:"budget",rules:["required","numeric"],visible:!0},{name:"month",label:"Mes",field:"month",rules:["required","string"],visible:!1},{name:"year",label:"Año",field:"year",rules:["required","string"],visible:!1}]}),l=p({columns:[{name:"Nombre de ingreso",key:"name",visible:!0,width:"60%"},{name:"Presupuesto",key:"budget",visible:!0,width:"30%"}],isLoading:!0,data:[],actions:[{name:"Edit",icon:"PencilIcon",event:"edit",width:"5%"},{name:"Delete",icon:"TrashIcon",event:"delete",width:"5%"}]}),d=(n,a)=>{n==="edit"?(Object.keys(m.formData).forEach(t=>{m.formData[t]=a[t]}),m.route=route("api.incomes.update",{id:m.formData.id}),b.value=!0):n==="delete"&&(Object.keys(m.formData).forEach(t=>{m.formData[t]=a[t]}),h.value=!0)},y=()=>{console.log("Action: Create"),w.value=!0},C=async n=>{o.wallet.incomes.push(n)},D=async n=>{o.wallet.incomes=o.wallet.incomes.map(a=>a.id===n.id?{...a,...n}:a),l.data=o.wallet.incomes},E=async n=>{o.wallet.incomes=o.wallet.incomes.filter(a=>a.id!==n)},v=()=>{l.data=o.wallet.incomes,l.isLoading=!1};return k(()=>{v()}),P(()=>o.wallet.incomes,n=>{l.data=n},{immediate:!0}),{message:A,showModalCreate:w,showModalEdit:b,showModalDelete:h,createdIncome:u,editedIncome:m,tableIncomes:l,handleAction:d,handleActionCreate:y,deleteIncome:E,addIncome:C,updateIncome:D}}function x(){const A=f(""),w=f(!1),b=f(!1),h=f(!1),u=p([{value:"essential_needs",name:"Necesidades esenciales"},{value:"discretionary_spending",name:"Gastos no esenciales"},{value:"savings",name:"Ahorros"}]),m=p({title:"Crear Tag(Categoria)",route:route("api.tags.store"),method:"post",data:[{name:"wallet_id",value:o.wallet.id}],isLoading:!1,formData:{name:"",wallet_id:o.wallet.id,category:""},fields:[{name:"name",label:"Nombre",field:"name",rules:["required","string"]},{name:"category",label:"Categorias",field:"category",rules:["required","string"],type:"select",options:u}]}),l=p({title:"Editar Tag(Categoria)",route:"",method:"put",data:[{name:"wallet_id",value:o.wallet.id}],isLoading:!1,formData:{id:"",name:"",category:""},fields:[{name:"name",label:"Nombre",field:"name",rules:["required","string"],visible:!0},{name:"category",label:"Categorias",field:"category",rules:["required","string"],type:"select",options:u,visible:!0}]}),d=p({columns:[{name:"Nombre de categoria",key:"name",visible:!0,width:"60%"},{name:"Categoria",key:"categoria",visible:!0,width:"30%"}],isLoading:!0,data:[],actions:[{name:"Edit",icon:"PencilIcon",event:"edit",width:"5%"},{name:"Delete",icon:"TrashIcon",event:"delete",width:"5%"}]}),y=(a,t)=>{a==="edit"?(Object.keys(l.formData).forEach(s=>{l.formData[s]=t[s]}),l.route=route("api.tags.update",{id:l.formData.id}),b.value=!0):a==="delete"&&(Object.keys(l.formData).forEach(s=>{l.formData[s]=t[s]}),h.value=!0)},C=()=>{w.value=!0},D=async a=>{o.wallet.tags=o.wallet.tags.filter(t=>t.id!==a),d.data=[...o.wallet.tags]},E=async a=>{const t=u.find(r=>r.value===a.category),s={...a,categoria:t?t.name:null};o.wallet.tags.push(s),d.data=[...o.wallet.tags],console.log("Add:",o.wallet.tags)},v=async a=>{console.log("Tag Edit:",a);const t=u.find(r=>r.value===a.category),s={...a,categoria:t?t.name:null};o.wallet.tags=o.wallet.tags.map(r=>r.id===a.id?s:r)},n=()=>{d.data=o.wallet.tags.map(a=>{const t=u.find(s=>s.value===a.category);return{...a,categoria:t?t.name:null}}),d.isLoading=!1};return k(()=>{n()}),P(()=>o.wallet.tags,a=>{d.data=a.map(t=>{const s=u.find(r=>r.value===t.category);return{...t,categoria:s?s.name:null}})},{immediate:!0}),{message:A,showModalCreate:w,showModalEdit:b,showModalDelete:h,createdTag:m,editedTag:l,tableTags:d,handleAction:y,handleActionCreate:C,deleteTag:D,addTag:E,updateTag:v}}function ee(){const A=f(""),w=f(!1),b=f(!1),h=f(!1),u=p([]),m=p({title:"Crear Egreso",route:route("api.egresses.store"),method:"post",data:[{name:"wallet_id",value:o.wallet.id},{name:"month",value:o.month},{name:"year",value:o.year}],isLoading:!1,formData:{name:"",category:"",budget:""},fields:[{name:"tag_id",label:"Categoria",field:"tag_id",rules:["required"],type:"select",options:u},{name:"name",label:"Nombre",field:"name",rules:["required","string"]},{name:"budget",label:"Presupuesto",field:"budget",rules:["required","numeric"],type:"number"}]}),l=p({title:"Editar Egreso",route:"",method:"put",data:[{name:"wallet_id",value:o.wallet.id}],isLoading:!1,formData:{id:"",name:"",tag_id:"",budget:"",month:"",year:""},fields:[{name:"tag_id",label:"Categoria",field:"tag_id",rules:["required"],type:"select",options:u,visible:!0},{name:"name",label:"Nombre",field:"name",rules:["required","string"],visible:!0},{name:"budget",label:"Presupuesto",field:"budget",rules:["required","numeric"],type:"number",visible:!0},{name:"month",label:"Mes",field:"month",rules:["required","numeric"],type:"number",visible:!0},{name:"year",label:"Año",field:"year",rules:["required","numeric"],type:"number",visible:!0}]}),d=p({columns:[{name:"Nombre de egreso",key:"name",visible:!0,width:"60%"},{name:"Categoria",key:"tag.name",visible:!0,width:"20%"},{name:"Presupuesto",key:"budget",visible:!0,width:"10%"}],isLoading:!0,data:[],actions:[{name:"Edit",icon:"PencilIcon",event:"edit",width:"5%"},{name:"Delete",icon:"TrashIcon",event:"delete",width:"5%"}]}),y=(a,t)=>{a==="edit"?(Object.keys(l.formData).forEach(s=>{l.formData[s]=t[s]}),l.route=route("api.egresses.update",{id:l.formData.id}),b.value=!0):a==="delete"&&(Object.keys(l.formData).forEach(s=>{l.formData[s]=t[s]}),h.value=!0)},C=()=>{console.log("Action: Create"),w.value=!0},D=async a=>{o.wallet.egresses=o.wallet.egresses.filter(t=>t.id!==a),d.data=o.wallet.egresses},E=async a=>{o.wallet.egresses.push(a),d.data=o.wallet.egresses},v=async a=>{o.wallet.egresses=o.wallet.egresses.map(t=>t.id===a.id?{...t,...a}:t),d.data=o.wallet.egresses},n=()=>{d.data=o.wallet.egresses.map(a=>{const t=u.find(s=>s.id===a.tag_id);return{...a,categoria:t?t.name:null}}),d.isLoading=!1};return k(()=>{n()}),P(()=>o.wallet.tags,(a,t)=>{a.forEach((s,r)=>{const M=t?t[r]:null;M&&(s.name!==M.name||s.id!==M.id)&&console.log(`Tag actualizado: ${M.name} -> ${s.name}`)}),u.splice(0,u.length,...a.map(s=>({value:s.id,name:s.name})))},{immediate:!0,deep:!0}),{message:A,showModalCreate:w,showModalEdit:b,showModalDelete:h,createdEgress:m,editedEgress:l,tableEgresses:d,handleAction:y,handleActionCreate:C,deleteEgress:D,addEgress:E,updateEgress:v}}const ae={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},te={class:"col-span-1 md:col-span-2"},re={__name:"Setting",setup(A){const{showModalCreate:w,showModalEdit:b,showModalDelete:h,createdIncome:u,editedIncome:m,tableIncomes:l,handleAction:d,handleActionCreate:y,deleteIncome:C,addIncome:D,updateIncome:E}=Z(),{showModalCreate:v,showModalEdit:n,showModalDelete:a,createdTag:t,editedTag:s,tableTags:r,handleAction:M,handleActionCreate:B,deleteTag:F,addTag:V,updateTag:G}=x(),{showModalCreate:j,showModalEdit:O,showModalDelete:U,createdEgress:S,editedEgress:I,tableEgresses:T,handleAction:H,handleActionCreate:J,deleteEgress:K,addEgress:Q,updateEgress:R}=ee();return(L,i)=>(W(),X(Y,null,[z("div",ae,[g(q,{isLoading:e(l).isLoading,data:e(l).data,columns:e(l).columns.filter(c=>c.visible),actions:e(l).actions,onAction:e(d),onCreate:e(y)},null,8,["isLoading","data","columns","actions","onAction","onCreate"]),g(q,{isLoading:e(r).isLoading,data:e(r).data,columns:e(r).columns.filter(c=>c.visible),actions:e(r).actions,onAction:e(M),onCreate:e(B)},null,8,["isLoading","data","columns","actions","onAction","onCreate"]),z("div",te,[g(q,{isLoading:e(T).isLoading,data:e(T).data,columns:e(T).columns.filter(c=>c.visible),actions:e(T).actions,onAction:e(H),onCreate:e(J)},null,8,["isLoading","data","columns","actions","onAction","onCreate"])])]),g(_,{show:e(w),onClose:i[0]||(i[0]=c=>w.value=!1),created:e(u),table:e(l).data,onCreated:e(D)},null,8,["show","created","table","onCreated"]),g($,{show:e(b),onClose:i[1]||(i[1]=c=>b.value=!1),edited:e(m),table:e(l).data,onUpdate:e(E)},null,8,["show","edited","table","onUpdate"]),g(N,{show:e(h),onClose:i[2]||(i[2]=c=>h.value=!1),route:L.route("api.incomes.destroy",{id:e(m).formData.id}),name:e(m).formData.name,onDelete:e(C),selected:e(m).formData},null,8,["show","route","name","onDelete","selected"]),g(_,{show:e(v),onClose:i[3]||(i[3]=c=>v.value=!1),created:e(t),table:e(r).data,onCreated:e(V)},null,8,["show","created","table","onCreated"]),g($,{show:e(n),onClose:i[4]||(i[4]=c=>n.value=!1),edited:e(s),table:e(r).data,onUpdate:e(G)},null,8,["show","edited","table","onUpdate"]),g(N,{show:e(a),onClose:i[5]||(i[5]=c=>a.value=!1),route:L.route("api.tags.destroy",{id:e(s).formData.id}),name:e(s).formData.name,onDelete:e(F),selected:e(s).formData},null,8,["show","route","name","onDelete","selected"]),g(_,{show:e(j),onClose:i[6]||(i[6]=c=>j.value=!1),created:e(S),table:e(T).data,onCreated:e(Q)},null,8,["show","created","table","onCreated"]),g($,{show:e(O),onClose:i[7]||(i[7]=c=>O.value=!1),edited:e(I),table:e(T).data,onUpdate:e(R)},null,8,["show","edited","table","onUpdate"]),g(N,{show:e(U),onClose:i[8]||(i[8]=c=>U.value=!1),route:L.route("api.egresses.destroy",{id:e(I).formData.id}),name:e(I).formData.name,onDelete:e(K),selected:e(I).formData},null,8,["show","route","name","onDelete","selected"])],64))}};export{re as default};
